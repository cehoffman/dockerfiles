# Autogenerated configuration file template
#################################
# allow-from	If set, only allow these comma separated netmasks to recurse
{{ with getenv "RECURSOR_ALLOW_FROM" }}
allow-from={{.}}

{{ end }}
#################################
# allow-from-file	If set, load allowed netmasks from this file
# allow-from-file=

#################################
# any-to-tcp	Answer ANY queries with tc=1, shunting to TCP
{{ with getenv "RECURSOR_ANY_TO_TCP" }}
any-to-tcp={{.}}

{{ end }}
#################################
# api-config-dir	Directory where REST API stores config and zones
# api-config-dir=

#################################
# api-key	Static pre-shared authentication key for access to the REST API
{{ with getenv "RECURSOR_API_KEY" }}
api-key={{.}}

{{ end }}
#################################
# api-logfile	Location of the server logfile (used by the REST API)
{{ with getenv "RECURSOR_API_LOGFILE" }}
api-logfile={{.}}

{{ else }}
# api-logfile=/dev/null

{{ end }}
#################################
# api-readonly	Disallow data modification through the REST API when set
{{ with getenv "RECURSOR_API_READONLY" }}
api-readonly={{.}}

{{ end }}
#################################
# auth-zones	Zones for which we have authoritative data, comma separated domain=file pairs 
{{ with getenv "RECURSOR_AUTH_ZONES" }}
auth-zones={{.}}

{{ end }}
#################################
# carbon-interval	Number of seconds between carbon (graphite) updates
{{ with getenv "RECURSOR_CARBON_INTERVAL" }}
carbon-interval={{.}}

{{ end }}
#################################
# carbon-ourname	If set, overrides our reported hostname for carbon stats
{{ with getenv "RECURSOR_CARBON_OURNAME" }}
carbon-ourname={{.}}

{{ end }}
#################################
# carbon-server	If set, send metrics in carbon (graphite) format to this server
{{ with getenv "RECURSOR_CARBON_SERVER" }}
carbon-server={{.}}

{{ end }}
#################################
# chroot	switch to chroot jail
#
# chroot=

#################################
# client-tcp-timeout	Timeout in seconds when talking to TCP clients
{{ with getenv "RECURSOR_CLIENT_TCP_TIMEOUT" }}
client-tcp-timeout={{.}}

{{ end }}
#################################
# config-dir	Location of configuration directory (recursor.conf)
#
# config-dir=/etc/powerdns/

#################################
# config-name	Name of this virtual configuration - will rename the binary image
#
# config-name=

#################################
# daemon	Operate as a daemon
#
daemon=no

#################################
# delegation-only	Which domains we only accept delegations from
{{ with getenv "RECURSOR_DELEGATION_ONLY" }}
delegation-only={{.}}

{{ end }}
#################################
# disable-packetcache	Disable packetcache
{{ with getenv "RECURSOR_DISABLE_PACKETCACHE" }}
disable-packetcache={{.}}

{{ end }}
#################################
# dnssec	DNSSEC mode: off/process (default)/log-fail/validate
{{ with getenv "RECURSOR_DNSSEC" }}
dnssec={{.}}

{{ end }}
#################################
# dont-query	If set, do not query these netmasks for DNS data
{{ with getenv "RECURSOR_DONT_QUERY" }}
dont-query={{.}}
{{ end }}

#################################
# edns-outgoing-bufsize	Outgoing EDNS buffer size
{{ with getenv "RECURSOR_EDNS_OUTGOING_BUFSIZE" }}
edns-outgoing-bufsize={{.}}

{{ end }}
#################################
# edns-subnet-whitelist	List of netmasks and domains that we should enable EDNS subnet for
{{ with getenv "RECURSOR_EDNS_SUBNET_WHITELIST" }}
edns-subnet-whitelist={{.}}

{{ end }}
#################################
# entropy-source	If set, read entropy from this file
#
# entropy-source=/dev/urandom

#################################
# etc-hosts-file	Path to 'hosts' file
#
# etc-hosts-file=/etc/hosts

#################################
# export-etc-hosts	If we should serve up contents from /etc/hosts
#
export-etc-hosts=off

#################################
# export-etc-hosts-search-suffix	Also serve up the contents of /etc/hosts with this suffix
#
# export-etc-hosts-search-suffix=

#################################
# forward-zones	Zones for which we forward queries, comma separated domain=ip pairs
{{ with getenv "RECURSOR_FORWARD_ZONES" }}
forward-zones={{.}}

{{ end }}
#################################
# forward-zones-file	File with (+)domain=ip pairs for forwarding
#
# forward-zones-file=

#################################
# forward-zones-recurse	Zones for which we forward queries with recursion bit, comma separated domain=ip pairs
{{ with getenv "RECURSOR_FORWARD_ZONES_RECURSE" }}
forward-zones-recurse={{.}}

{{ end }}
#################################
# hint-file	If set, load root hints from this file
#
# hint-file=

#################################
# include-dir	Include *.conf files from this directory
#
# include-dir=

#################################
# latency-statistic-size	Number of latency values to calculate the qa-latency average
{{ with getenv "RECURSOR_LATENCY_STATISTIC_SIZE" }}
latency-statistic-size={{.}}

{{ end }}
#################################
# local-address	IP addresses to listen on, separated by spaces or commas. Also accepts ports.
{{ with getenv "RECURSOR_LOCAL_ADDRESS" }}
local-address={{.}}

{{ else }}

local-address=0.0.0.0
{{ end }}
#################################
# local-port	port to listen on
{{ with getenv "RECURSOR_LOCAL_PORT" }}
local-port={{.}}

{{ end }}
#################################
# log-common-errors	If we should log rather common errors
{{ with getenv "RECURSOR_LOG_COMMON_ERRORS" }}
log-common-errors={{.}}

{{ end }}
#################################
# logging-facility	Facility to log messages as. 0 corresponds to local0
{{ with getenv "RECURSOR_LOGGING_FACILITY" }}
logging-facility={{.}}

{{ end }}
#################################
# loglevel	Amount of logging. Higher is more. Do not set below 3
{{ with getenv "RECURSOR_LOGLEVEL" }}
loglevel={{.}}

{{ end }}
#################################
# lua-config-file	More powerful configuration options
#
# lua-config-file=

#################################
# lua-dns-script	Filename containing an optional 'lua' script that will be used to modify dns answers
#
# lua-dns-script=

#################################
# max-cache-entries	If set, maximum number of entries in the main cache
{{ with getenv "RECURSOR_MAX_CACHE_ENTRIES" }}
max-cache-entries={{.}}

{{ end }}
#################################
# max-cache-ttl	maximum number of seconds to keep a cached entry in memory
{{ with getenv "RECURSOR_MAX_CACHE_TTL" }}
max-cache-ttl={{.}}

{{ end }}
#################################
# max-mthreads	Maximum number of simultaneous Mtasker threads
{{ with getenv "RECURSOR_MAX_MTHREADS" }}
max-mthreads={{.}}

{{ end }}
#################################
# max-negative-ttl	maximum number of seconds to keep a negative cached entry in memory
{{ with getenv "RECURSOR_MAX_NEGATIVE_TTL" }}
max-negative-ttl={{.}}

{{ end }}
#################################
# max-packetcache-entries	maximum number of entries to keep in the packetcache
{{ with getenv "RECURSOR_MAX_PACKETCACHE_ENTRIES" }}
max-packetcache-entries={{.}}

{{ end }}
#################################
# max-qperq	Maximum outgoing queries per query
{{ with getenv "RECURSOR_MAX_QPERQ" }}
max-qperq={{.}}

{{ end }}
#################################
# max-tcp-clients	Maximum number of simultaneous TCP clients
{{ with getenv "RECURSOR_MAX_TCP_CLIENTS" }}
max-tcp-clients={{.}}

{{ end }}
#################################
# max-tcp-per-client	If set, maximum number of TCP sessions per client (IP address)
{{ with getenv "RECURSOR_MAX_TCP_PER_CLIENT" }}
max-tcp-per-client={{.}}

{{ end }}
#################################
# max-total-msec	Maximum total wall-clock time per query in milliseconds, 0 for unlimited
{{ with getenv "RECURSOR_MAX_TOTAL_MSEC" }}
max-total-msec={{.}}

{{ end }}
#################################
# minimum-ttl-override	Set under adverse conditions, a minimum TTL
{{ with getenv "RECURSOR_MINIMUM_TTL_OVERRIDE" }}
minimum-ttl-override={{.}}

{{ end }}
#################################
# network-timeout	Wait this nummer of milliseconds for network i/o
{{ with getenv "RECURSOR_NETWORK_TIMEOUT" }}
network-timeout={{.}}

{{ end }}
#################################
# no-shuffle	Don't change
# no-shuffle=no

#################################
# non-local-bind	Enable binding to non-local addresses by using FREEBIND / BINDANY socket options
{{ with getenv "RECURSOR_NON_LOCAL_BIND" }}
non-local-bind={{.}}

{{ end }}
#################################
# packetcache-servfail-ttl	maximum number of seconds to keep a cached servfail entry in packetcache
{{ with getenv "RECURSOR_PACKETCACHE_SERVFAIL_TTL" }}
packetcache-servfail-ttl={{.}}

{{ end }}
#################################
# packetcache-ttl	maximum number of seconds to keep a cached entry in packetcache
{{ with getenv "RECURSOR_PACKETCACHE_TTL" }}
packetcache-ttl={{.}}

{{ end }}
#################################
# pdns-distributes-queries	If PowerDNS itself should distribute queries over threads
{{ with getenv "RECURSOR_PDNS_DISTRIBUTES_QUERIES" }}
pdns-distributes-queries={{.}}

{{ end }}
#################################
# processes	Launch this number of processes (EXPERIMENTAL, DO NOT CHANGE)
#
# processes=1

#################################
# query-local-address	Source IP address for sending queries
#
# query-local-address=0.0.0.0

#################################
# query-local-address6	Source IPv6 address for sending queries. IF UNSET, IPv6 WILL NOT BE USED FOR OUTGOING QUERIES
#
# query-local-address6=

#################################
# quiet	Suppress logging of questions and answers
{{ with getenv "RECURSOR_QUIET" }}
quiet={{.}}

{{ end }}
#################################
# root-nx-trust	If set, believe that an NXDOMAIN from the root means the TLD does not exist
{{ with getenv "RECURSOR_ROOT_NX_TRUST" }}
# root-nx-trust={{.}}

{{ end }}
#################################
# security-poll-suffix	Domain name from which to query security update notifications
{{ with getenv "RECURSOR_SECURITY_POLL_SUFFIX" }}
security-poll-suffix={{.}}

{{ end }}
#################################
# serve-rfc1918	If we should be authoritative for RFC 1918 private IP space
{{ with getenv "RECURSOR_SERVE_RFC1918" }}
serve-rfc1918={{.}}

{{ end }}
#################################
# server-down-max-fails	Maximum number of consecutive timeouts (and unreachables) to mark a server as down ( 0 => disabled )
{{ with getenv "RECURSOR_SERVER_DOWN_MAX_FAILS" }}
server-down-max-fails={{.}}

{{ end }}
#################################
# server-down-throttle-time	Number of seconds to throttle all queries to a server after being marked as down
{{ with getenv "RECURSOR_SERVER_DOWN_THROTTLE_TIME" }}
server-down-throttle-time={{.}}

{{ end }}
#################################
# server-id	Returned when queried for 'server.id' TXT or NSID, defaults to hostname
{{ with getenv "RECURSOR_SERVER_ID" }}
server-id={{.}}

{{ end }}
#################################
# setgid	If set, change group id to this gid for more security
#
setgid=pdns

#################################
# setuid	If set, change user id to this uid for more security
#
setuid=pdns

#################################
# single-socket	If set, only use a single socket for outgoing queries
{{ with getenv "RECURSOR_SINGLE_SOCKET" }}
single-socket={{.}}

{{ end }}
#################################
# soa-minimum-ttl	Don't change
#
# soa-minimum-ttl=0

#################################
# socket-dir	Where the controlsocket will live, /var/run/ when unset and not chrooted
#
# socket-dir=

#################################
# socket-group	Group of socket
#
# socket-group=

#################################
# socket-mode	Permissions for socket
#
# socket-mode=

#################################
# socket-owner	Owner of socket
#
# socket-owner=

#################################
# spoof-nearmiss-max	If non-zero, assume spoofing after this many near misses
#
# spoof-nearmiss-max=20

#################################
# stack-size	stack size per mthread
#
# stack-size=200000

#################################
# stats-ringbuffer-entries	maximum number of packets to store statistics for
#
# stats-ringbuffer-entries=10000

#################################
# threads	Launch this number of threads
{{ with getenv "RECURSOR_THREADS" }}
threads={{.}}

{{ end }}
#################################
# trace	if we should output heaps of logging. set to 'fail' to only log failing domains
{{ with getenv "RECURSOR_TRACE" }}
trace={{.}}

{{ end }}
#################################
# udp-truncation-threshold	Maximum UDP response size before we truncate
{{ with getenv "RECURSOR_UDP_TRUNCATION_THRESHOLD" }}
udp-truncation-threshold={{.}}

{{ end }}
#################################
# version-string	string reported on version.pdns or version.bind
{{ with getenv "RECURSOR_VERSION_STRING" }}
version-string={{.}}

{{ end }}
#################################
# webserver	Start a webserver (for REST API)
{{ with getenv "RECURSOR_WEBSERVER" }}
# webserver={{.}}

{{ end }}
#################################
# webserver-address	IP Address of webserver to listen on
{{ with getenv "RECURSOR_WEBSERVER_ADDRESS" }}
webserver-address={{.}}

{{ end }}
#################################
# webserver-allow-from	Webserver access is only allowed from these subnets
{{ with getenv "RECURSOR_WEBSERVER_ALLOW_FROM" }}
webserver-allow-from={{.}}

{{ end }}
#################################
# webserver-password	Password required for accessing the webserver
{{ with getenv "RECURSOR_WEBSERVER_PASSWORD" }}
webserver-password={{.}}

{{ end }}
#################################
# webserver-port	Port of webserver to listen on
{{ with getenv "RECURSOR_WEBSERVER_PORT" }}
webserver-port={{.}}

{{ end }}
#################################
# write-pid	Write a PID file
#
# write-pid=no


